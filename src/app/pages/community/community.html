<!-- Interactive Canvas Background -->
<canvas #bgCanvas id="bg-canvas"></canvas>

<div class="community-container">
  <header class="hero-section">
    <button class="join-discussion-top" aria-label="Join the Discussion">
      <svg viewBox="0 0 24 24" class="btn-icon" aria-hidden="true">
        <path d="M3 12h4l3 8 4-16 3 8h4" />
      </svg>
      JOIN THE DISCUSSION
    </button>

    <h1>HeatBeasts Community</h1>
    <p>
      Connect with gamers worldwide. Ask questions, share strategies, and level up together
      in India's most active gaming community.
    </p>

    <div class="stats-container">
      @for (s of stats; track s.label) {
        <div class="stat-card">
          <div class="stat-icon">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              @if (s.label === 'Active Members') {
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
              } @else if (s.label === 'Questions') {
                <path d="M4 5h16v12H7l-3 3V5z" />
              } @else if (s.label === 'Response Rate') {
                <path d="M4 19l7-7 3 3 6-6" />
              }
            </svg>
          </div>
          <h2>{{ s.value }}</h2>
          <p>{{ s.label }}</p>
        </div>
      }
    </div>
  </header>

  <!-- FILTERS -->
  <div class="filters" role="tablist" aria-label="Post filters">
    <button [class.active]="activeFilter==='trending'"   (click)="setFilter('trending')"   role="tab" class="filter-btn">
      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 12h4l3 8 4-16 3 8h4"/></svg>
      <span>Trending</span>
    </button>

    <button [class.active]="activeFilter==='new'"        (click)="setFilter('new')"        role="tab" class="filter-btn">
      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3v18M5 10l7-7 7 7"/></svg>
      <span>New Releases</span>
    </button>

    <button [class.active]="activeFilter==='discussed'"  (click)="setFilter('discussed')"  role="tab" class="filter-btn">
      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4"/></svg>
      <span>Most Discussed</span>
    </button>

    <button [class.active]="activeFilter==='upvoted'"    (click)="setFilter('upvoted')"    role="tab" class="filter-btn">
      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4l6 8h-4v8h-4v-8H6z"/></svg>
      <span>Most Upvoted</span>
    </button>

    <button [class.active]="activeFilter==='viewed'"     (click)="setFilter('viewed')"     role="tab" class="filter-btn">
      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12zm10 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/></svg>
      <span>Most Viewed</span>
    </button>

    <button [class.active]="activeFilter==='unanswered'" (click)="setFilter('unanswered')" role="tab" class="filter-btn">
      <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 8h12M6 12h7M4 20l3-3h11a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v14z"/></svg>
      <span>Unanswered</span>
    </button>
  </div>

  <!-- GRID: posts + sidebar -->
  <main class="content page-grid">
    <section class="posts">
      @for (post of filteredPosts; track post.title) {
        <div class="post-card">
         <div class="post-header">
  <div class="post-user">
    <!-- REPLACE this element -->
    <div class="post-avatar"
     [style.backgroundImage]="'url(' + getAvatarUrl(post.user) + ')'"
     aria-hidden="true">
</div>

    <!-- keep the rest as is -->
    <div class="user-info">
      <div class="user-name">{{ post.user }}</div>
      <div class="time">{{ post.time }}</div>
    </div>
  </div>
</div>


          <h3>{{ post.title }}</h3>
          <p>{{ post.content }}</p>

          <div class="tags">
            @for (tag of post.tags; track tag) {
              <span>{{ tag }}</span>
            }
          </div>

          <div class="post-stats">
            <div>üëç {{ post.likes }}</div>
            <div>üí¨ {{ post.comments }}</div>
            <div>üëÅÔ∏è {{ post.views }}</div>
          </div>
        </div>
      }
    </section>

    <!-- TOP QUESTERS -->
  <aside class="leaderboard-card">
  <div class="lb-header">
    <div class="lb-left">
      <svg class="lb-trophy" viewBox="0 0 24 24"><path d="M5 5h14v3a4 4 0 0 1-4 4h-1a4 4 0 0 1-3 2.9V17h4v2H8v-2h4v-2.1A4 4 0 0 1 9 12H8a4 4 0 0 1-4-4V5z"/></svg>
      <h3>Top Questers</h3>
      <span class="live-dot"></span>
      <small>Updated 2 mins ago</small>
    </div>
    <button class="view-all-btn">VIEW ALL</button>
  </div>

  <ul class="lb-list">
    @for (q of topQuesters; track q.name; let i = $index) {
      <li class="lb-row">
        <div class="rank-badge" [class.gold]="i===0" [class.silver]="i===1" [class.bronze]="i===2">
          <svg *ngIf="i===0" class="rb-icon crown" viewBox="0 0 24 24"><path d="M3 8l4 3 3-5 3 5 4-3 2 11H1l2-11zM6 19h12"/></svg>
          <svg *ngIf="i===1" class="rb-icon medal" viewBox="0 0 24 24"><circle cx="12" cy="12" r="6"/><path d="M9 2h6l1 5H8l1-5z"/></svg>
          <svg *ngIf="i===2" class="rb-icon medal" viewBox="0 0 24 24"><circle cx="12" cy="12" r="6"/><path d="M9 2h6l1 5H8l1-5z"/></svg>
          <span *ngIf="i>2" class="rb-num">{{ i + 1 }}</span>
        </div>

        <!-- meta -->
        <div class="lb-meta">
          <div class="name">
            {{ q.name }}
            <span class="online-dot" *ngIf="q.online"></span>
          </div>
          <div class="role">{{ q.title }}</div>
        </div>

        <span class="score" [class.pos]="isPos(q.score)" [class.neg]="!isPos(q.score)">{{ q.score }}</span>
        <button class="follow-btn">Follow</button>
      </li>
    }
  </ul>

  <button class="full-btn">VIEW FULL LEADERBOARD</button>
</aside>


  </main>
</div>
